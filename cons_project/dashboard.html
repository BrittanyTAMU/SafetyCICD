<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safety Management System</title>
    <!-- google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- Icon for logo from google -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<!-- icon for dashboard from google -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<!-- bootstrap  -->
<link rel="stylesheet" href="	https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

<!-- Custom CSS -->
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <div class="container">
    <div class="left">
        <header>
            <div class="logo">
                <h2>Health & Safety</h2>
                <div class="close">
                    <span class="material-symbols-outlined">
                        close
                    </span>
                </div>
            </div>
            <nav>
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <span class="material-symbols-outlined full">
                                grid_view
                                </span>
                                <span class="title">Dashboard</span>

                        </a>
                    </li>
                    
                   
                </li>
                    <li>
                        <a href="SafetyEvents.html">
                            <span class="material-symbols-outlined">
                                report
                                </span>
                                <span class="title">Safety Events</span>
                        </a>
                    </li>
                    <li>
                        <a href="injury.html">
                            <span class="material-symbols-outlined">
                                personal_injury
                                </span>
                                <span class="title">Injury</span>
                        </a>
                    </li>
                    <li>
                        <a href="environ.html">
                            <span class="material-symbols-outlined">
                                forest
                                </span>
                                <span class="title">Environmental Incidents</span>
                        </a>
                    </li><li>
                        <a href="prperty.html">
                            <span class="material-symbols-outlined">
                                apartment
                                </span>
                                <span class="title">Property Damages</span>
                        </a>
                    </li>
                    <li>
                        <a href="vehicle.html">
                            <span class="material-symbols-outlined">
                                car_crash
                                </span>
                                <span class="title">Vehicle Incidents</span>
                        </a>
                    </li>
                    <li>
                        <a href="security.html">
                            <span class="material-symbols-outlined">
                                security
                                </span>
                                <span class="title">Security Incidents</span>
                        </a>
                        
                    </li> 
                    <!-- <li>
                        <a href="https://construction.auth.us-east-1.amazoncognito.com/logout?client_id=7hprrj4gufvqe321r3u0trd3km&logout_uri=http://localhost:3000/cons_project/logout.html">
                            <span class="material-symbols-outlined">
                                close
                                </span>
                                <span class="title">Log out</span>
                        </a>
                        
                    </li>  -->
                </ul>
            </nav>
        </header>
        <div class="upgrade">
            <h4>Upgrade to <b>PRO</b> for <br> more features</h4>
            <div class="upBtn">
                <button>Upgrade</button>
            </div>
        </div>
       
    </div>
    <div class="right">
        <div class="top">
            <div class="searchBx">
                <h2><b>Dashboard</b></h2>
                <div class="inputBx">
                    <span class="material-symbols-outlined searchOpen">
                        search
                    </span>
                    <input type="text" placeholder="Search...">
                    <span class="material-symbols-outlined searchClose">
                        close
                    </span>
                </div>
            </div>
            <div>
                <a href="submit.html">
                    <span class="material-symbols-outlined full">
                        grid_view
                        </span>
                        <span class="title">Submit Form</span>

                </a>

            </div>
            <div>
                <a href="https://construction.auth.us-east-1.amazoncognito.com/logout?client_id=7hprrj4gufvqe321r3u0trd3km&logout_uri=http://localhost:3000/cons_project/logout.html">
                    <span class="material-symbols-outlined">
                        close
                        </span>
                        <span class="title">Log out</span>
                </a>
            </div>
            <div class="user">
                <span class="material-symbols-outlined ">
                    notifications
                </span>
                <div class="userImg">
                    <img src="./img/gears.png" alt="user">
                </div>
                
                <h2>Brittany's Code <br><span>Administrator</span></h2>
                
                <div class="arrow">
                    <span class="material-symbols-outlined ">
                        expand_more
                    </span>
                    
                </div>
               
                <div class="toggle">
                    <span class="material-symbols-outlined ">
                        menu
                    </span>
                    <span class="material-symbols-outlined ">
                        close
                    </span>
                </div>
            </div>
        </div>
        <main>
            <div class="projectCard">
                <div class="projectTop">
                    <h2 id="projectName">Project Name: <br><span id="companyName">Company Name:</span></h2>
                    <div class="projectDots">
                        <span class="material-symbols-outlined ">
                            more_horiz
                        </span>
                    </div>
                </div>
                <div class="projectProgress">
                    <div class="process">
                        <h2>In Progress</h2>
                    </div>
                    <div class="priority">
                        <h2>High Priority</h2>
                    </div>
                </div>
                <div class="groupImg">
                    <a href="#">
                        <img src="./img/gears.png" alt="img1">
                    </a>
                    <a href="#" style="--left: -10px">
                        <img src="./img/gears.png" alt="img2">
                    </a>
                    <a href="#" style="--left: -20px">
                        <img src="./img/gears.png" alt="img3">
                    </a>
                    <a href="#" style="--left: -30px">
                        <img src="./img/gears.png" alt="img4">
                    </a>
                    <a href="#" style="--left: -40px">
                        <img src="./img/gears.png" alt="img5">
                    </a>
                    <a href="#" style="--left: -50px">
                        <span class="number">+3</span>
                    </a>
                </div>
                <div class="task">
                    <h2>Task Done: <bold>35</bold> / 50</h2>
                    <span class="line"></span>
                </div>
                <div class="due">
                    <h2 id="dueDate1">Due Date: 04 November</h2>
                </div>
            </div>
            <div class="projectCard projectCard2">
                <div class="projectTop">
                    <h2 id="projectName2">Project Name <br><span id="companyName2">Company Name</span></h2>
                    <div class="projectDots">
                        <span class="material-symbols-outlined ">
                            more_horiz
                        </span>
                    </div>
                </div>
                <div class="projectProgress">
                    <div class="process">
                        <h2>In Progress</h2>
                    </div>
                    <div class="priority">
                        <h2>High Priority</h2>
                    </div>
                </div>
                <div class="groupImg">
                    <a href="#">
                        <img src="./img/gears.png" alt="img1">
                    </a>
                    <a href="#" style="--left: -10px">
                        <img src="./img/gears.png" alt="img2">
                    </a>
                    <a href="#" style="--left: -20px">
                        <img src="./img/gears.png" alt="img3">
                    </a>
                    <a href="#" style="--left: -30px">
                        <img src="./img/gears.png" alt="img4">
                    </a>
                    <a href="#" style="--left: -40px">
                        <img src="./img/gears.png" alt="img5">
                    </a>
                    <a href="#" style="--left: -50px">
                        <span class="number">+3</span>
                    </a>
                </div>
                <div class="task">
                    <h2>Task Done: <bold>35</bold> / 50</h2>
                    <span class="line"></span>
                </div>
                <div class="due">
                    <h2 id="dueDate2">Due Date: 04 November</h2>
                </div>
                
            </div>
            <div class="myTasks">
                <div class="tasksHead">
                    <h2>My Task</h2>
                    <div class="tasksDots">
                        <span class="material-symbols-outlined ">
                            more_horiz
                        </span>
                    </div>
                </div>
                <div class="tasks">
                    <ul>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon done">
                                    <span class="material-symbols-outlined ">
                                        check
                                    </span>
                                </span>
                                <span class="tasksName" id="myTask1">My Task 1

                                </span> 
                            </span>
                            <span class="tasksStar full">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon notDone"></span>
                                <span class="tasksName" id="myTask2">My Task 2 </span> 
                            </span>
                            <span class="tasksStar half">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon notDone"></span>
                                <span class="tasksName" id="myTask3">My Task 3 </span> 
                            </span>
                            <span class="tasksStar half">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon done">
                                    <span class="material-symbols-outlined ">
                                        check
                                    </span>
                                </span>
                                
                                <span class="tasksName tasksLine" id="myTask4">My Task 4 </span> 
                            </span>
                            <span class="tasksStar half">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon done"><span class="material-symbols-outlined ">
                                    check
                                </span>
                            </span>
                                
                                <span class="tasksName tasksLine" id="myTask5">My Task 5 </span> 
                            </span>
                            <span class="tasksStar full">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon notDone"></span>
                                <span class="tasksName " id="myTask6">My Task 6 </span> 
                            </span>
                            <span class="tasksStar full">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                        <li>
                            <span class="tasksIconName">
                                <span class="tasksIcon notDone"></span>
                                <span class="tasksName " id="myTask7">My Task 7 </span> 
                            </span>
                            <span class="tasksStar half">
                                <span class="material-symbols-outlined ">
                                    star
                                </span>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="timeline">
                <div class="timelineHead">
                    <h2>Timeline</h2>
                    <div class="timelineDots">
                        <span class="material-symbols-outlined ">
                            more_horiz
                        </span>
                    </div>
                </div>
                <div class="timelineVideos">
                    <ul>
                        <li>
                            <span class="videoText">
                                <span class="material-symbols-outlined full ">
                                    slideshow
                                </span>
                                <span class="text" id="myTimeline1">Create Wireframe</span>
                            </span>
                            <div class="timelineTime" id="myTimelineTime1">32:54</div>
                        </li>
                        <li>
                            <span class="videoText">
                                <span class="material-symbols-outlined ">
                                    slideshow
                                </span>
                                <span class="text" id="myTimeline2">Logo Design</span>
                            </span>
                            <div class="timelineTime" id="myTimelineTime2">30:00</div>
                        </li>
                        <li>
                            <span class="videoText">
                                <span class="material-symbols-outlined ">
                                    slideshow
                                </span>
                                <span class="text" id="myTimeline3">Dashboard Design</span>
                            </span>
                            <div class="timelineTime" id="myTimelineTime3">30:00</div>
                        </li>
                        <li>
                            <span class="videoText">
                                <span class="material-symbols-outlined ">
                                    slideshow
                                </span>
                                <span class="text" id="myTimeline4">Landing Page</span>
                            </span>
                            <div class="timelineTime" id="myTimelineTime4">30:00</div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="calendar">
                <div class="calendarHead">
                    <h2>November 2024</h2>
                    <div class="calendarIcon">
                        <span class="material-symbols-outlined ">
                            chevron_left
                        </span>
                        <span class="material-symbols-outlined ">
                            chevron_right
                        </span>
                    </div>
                </div>
                <div class="calendarData">
                    <ul class="weeks">
                        <li>Sun</li>
                        <li>Mon</li>
                        <li>Tue</li>
                        <li>Wed</li>
                        <li>Thu</li>
                        <li>Fri</li>
                        <li>Sat</li>
                    </ul>
                    <div class="days">
                        <li class="inactive">30</li>
                        <li class="inactive">31</li>
                        <li>1</li>
                        <li>2</li>
                        <li>3</li>
                        <li class="active">4</li>
                        <li>5</li>
                        <li>6</li>
                        <li>7</li>
                        <li>8</li>
                        <li>9</li>
                        <li>10</li>
                        <li>11</li>
                        <li>12</li>
                        <li>13</li>
                        <li>14</li>
                        <li>15</li>
                        <li>16</li>
                        <li>17</li>
                        <li>18</li>
                        <li>19</li>
                        <li>20</li>
                        <li>21</li>
                        <li>22</li>
                        <li>23</li>
                        <li>24</li>
                        <li>25</li>
                        <li>26</li>
                        <li>27</li>
                        <li>28</li>
                        <li>29</li>
                        <li>30</li>
                        <li  class="inactive">1</li>
                        <li  class="inactive">2</li>
                        <li  class="inactive">3</li>
                    </div>
                </div>
            </div>
            <div class="messages">
                <div class="messagesHead">
                    <h2>Messages</h2>
                </div>
                <div class="messagesUser">
                    <div class="messagesUserImg">
                        <img src="./img/gears.png" alt="img">
                    </div>
                    <h2>Marvin McKinney <br><span>Commodo Volutpot noc</span></h2>
                </div>
                <div class="messagesUser">
                    <div class="messagesUserImg">
                        <img src="./img/gears.png" alt="img">
                    </div>
                    <h2>Wade Warren <br><span>Commodo Volutpot noc</span></h2>
                </div>
                <div class="messagesUser">
                    <div class="messagesUserImg">
                        <img src="./img/gears.png" alt="img">
                    </div>
                    <h2>John Cooper <br><span>Commodo Volutpot noc</span></h2>
                </div>
                <div class="messagesUser">
                    <div class="messagesUserImg">
                        <img src="./img/gears.png" alt="img">
                    </div>
                    <h2>Darlene Robertson<br><span>Commodo Volutpot noc</span></h2>
                </div>
                <div class="messagesUser">
                    <div class="messagesUserImg">
                        <img src="./img/gears.png" alt="img">
                    </div>
                    <h2>Kristin Watson <br><span>Commodo Volutpot noc</span></h2>
                </div>
            </div>
        </main>
    </div>
</div>
   
<script>
    document.addEventListener('DOMContentLoaded', () => {
    fetch('https://ugi0om9n21.execute-api.us-east-1.amazonaws.com/prod/get-dashboard', {  // Corrected API URL and fetch method
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
        },
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        console.log('Fetched dashboard Data:', data);
        if (data && data.length > 0) {  // Ensure there's data before updating the DOM
            updateDashboardDOM(data[0]);  // Assuming you want to show the first dashboard's data
        }
    })
    .catch(error => console.error('Error fetching dashboard data:', error));
});

function updateDashboardDOM(dashboard) {
    // Make sure `dashboard` exists before updating the DOM
    document.getElementById('projectName').innerText = dashboard.projectName || 'No data';
    //document.getElementById('companyName').innerText = dashboard.companyName || 'No data';
    document.getElementById('dueDate1').innerText = dashboard.dueDate1 || 'No data';
    document.getElementById('projectName2').innerText = dashboard.projectName2 || 'No data';
    document.getElementById('companyName2').innerText = dashboard.companyName2 || 'No data';
    document.getElementById('dueDate2').innerText = dashboard.dueDate2 || 'No data';
    document.getElementById('myTask1').innerText = dashboard.myTask1 || 'No data';
    document.getElementById('myTask2').innerText = dashboard.myTask2 || 'No data';
    document.getElementById('myTask3').innerText = dashboard.myTask3 || 'No data';
    document.getElementById('myTask4').innerText = dashboard.myTask4 || 'No data';
    document.getElementById('myTask5').innerText = dashboard.myTask5 || 'No data';
    document.getElementById('myTask6').innerText = dashboard.myTask6 || 'No data';
    document.getElementById('myTask7').innerText = dashboard.myTask7 || 'No data';
    document.getElementById('myTimeline1').innerText = dashboard.myTimeline1 || 'No data';
    document.getElementById('myTimeline2').innerText = dashboard.myTimeline2 || 'No data';
    document.getElementById('myTimeline3').innerText = dashboard.myTimeline3 || 'No data';
    document.getElementById('myTimeline4').innerText = dashboard.myTimeline4 || 'No data';
    document.getElementById('myTimelineTime1').innerText = dashboard.myTimelineTime1 || 'No data';
    document.getElementById('myTimelineTime2').innerText = dashboard.myTimelineTime2 || 'No data';
    document.getElementById('myTimelineTime3').innerText = dashboard.myTimelineTime3 || 'No data';
    document.getElementById('myTimelineTime4').innerText = dashboard.myTimelineTime4 || 'No data';
}
</script>
</body>
</html>
